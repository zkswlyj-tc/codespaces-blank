<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Basic HTML Page</title>
    <link rel="stylesheet" href="style.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Special+Elite&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <div class="sound-toggle" id="soundToggle" title="Toggle marching sound">
      Sound: ON
    </div>
    <input type="checkbox" id="launch" hidden />

    <audio id="bootAudio" src="assets/bootsound.mp3" preload="auto"></audio>

    <div class="landing-container">
      <h1 class="landing-title">BOOTS</h1>
      <h2 class="landing-sub">by Rudyard Kipling</h2>
      <label for="launch" class="enter-button" id="bootTrigger"
        >BEGIN MARCH</label
      >
    </div>

    <section class="main-section">
      <h2 class="visually-hidden">Marching Journey</h2>
      <div class="first-2">
        <img src="assets/soldier.svg" alt="Soldier" class="soldier" />
        <div class="bootprints">
          <img src="assets/boots1.svg" class="boots1" alt="bootprint style 1" />
          <img src="assets/boots2.svg" class="boots2" alt="bootprint style 2" />
          <img src="assets/boots3.svg" class="boots3" alt="bootprint style 3" />
          <img src="assets/boots4.svg" class="boots4" alt="bootprint style 4" />
          <img src="assets/boots5.svg" class="boots5" alt="bootprint style 5" />
        </div>
        <div class="poem-section">
          <div class="poem-sect1">
            <span class="glitch-img grunge-text">Seven</span>
            —
            <span class="glitch-img grunge-text">six</span>
            —
            <span class="glitch-img grunge-text">eleven</span>
            —
            <span class="glitch-img grunge-text">five</span>
            —
            <span class="glitch-img grunge-text">nine-an'-twenty</span>
            mile to-day —
          </div>

          <div class="poem-sect-2">
            <span class="glitch-img grunge-text">Four</span>
            —
            <span class="glitch-img grunge-text">eleven</span>
            —
            <span class="glitch-img grunge-text">seventeen</span>
            —
            <span class="glitch-img grunge-text">thirty-two</span>
            the day before —
          </div>
        </div>

        <div class="seven">
          <img src="assets/7.svg" alt="seven" />
        </div>
        <div class="six">
          <img src="assets/6.svg" alt="six" />
        </div>
        <div class="eleven">
          <img src="assets/11.svg" alt="eleven" />
        </div>
        <div class="five">
          <img src="assets/5.svg" alt="five" />
        </div>
        <div class="nine">
          <img src="assets/9.svg" alt="nine" />
        </div>
        <div class="twenty">
          <img src="assets/20.svg" alt="twenty" />
        </div>
        <div class="four">
          <img src="assets/4.svg" alt="four" />
        </div>
        <div class="eleven-2">
          <img src="assets/11(2).svg" alt="Abstract maroon shapes footprints" />
        </div>
        <div class="seventeen">
          <img src="assets/17.svg" alt="seventeen" />
        </div>
        <div class="thirty-two">
          <img src="assets/32.svg" alt="thirty-two" />
        </div>
      </div>

      <div class="boots-walking">
        <div class="bootprint bootprint-1"></div>
        <div class="bootprint bootprint-2"></div>
        <div class="bootprint bootprint-3"></div>
        <div class="bootprint bootprint-4"></div>
      </div>
      <div class="lastline1">-movin’ up an’ down again!</div>
      <div class="discharge-line">
        <span class="dis-word">There’s</span>
        <span class="dis-word">no</span>
        <span class="dis-word">discharge</span>
        <span class="dis-word">in</span>
        <span class="dis-word">the</span>
        <span class="dis-word">war!</span>
      </div>

      <div class="dont-eyes">
        <img src="assets/eye1.svg" alt="Don't Eye 1" class="dont-eye eye-1" />
        <img src="assets/eye2.svg" alt="Don't Eye 2" class="dont-eye eye-2" />
        <img src="assets/eye3.svg" alt="Don't Eye 3" class="dont-eye eye-3" />
        <img src="assets/eye4.svg" alt="Don't Eye 4" class="dont-eye eye-4" />
      </div>
      <div class="look-right-stack">
        <span class="grunge-text">look</span>
        <span class="grunge-text">at</span>
        <span class="grunge-text">what’s</span>
        <span class="grunge-text">in</span>
        <span class="grunge-text">front</span>
        <span class="grunge-text">of</span>
        <span class="grunge-text">you.</span>
      </div>

      <div class="madness-section">
        <div class="fragment men-frag men-1">Men</div>
        <div class="fragment men-frag men-2">men</div>
        <div class="fragment men-frag men-3">men</div>
        <div class="fragment men-frag men-4">men</div>
        <div class="fragment men-frag men-5">men</div>

        <div class="fragment line-frag stagger-1">go</div>
        <div class="fragment line-frag stagger-2">mad</div>
        <div class="fragment line-frag stagger-3">with</div>
        <div class="fragment line-frag stagger-4">watchin’</div>
        <div class="fragment line-frag stagger-5">’em</div>
        <div id="screamoJump" class="screamo-jumpscare">
          <img src="assets/screamo.svg" alt="Screamo Jumpscare" />
        </div>
        <svg
          class="discharge-arc"
          viewBox="0 0 600 200"
          xmlns="http://www.w3.org/2000/svg"
        >
          <defs>
            <path id="arcPath" d="M 50 150 Q 300 20 550 150" />
          </defs>
          <text
            fill="#ffcccc"
            font-size="22"
            font-family="Special Elite, monospace"
          >
            <textPath href="#arcPath" startOffset="50%" text-anchor="middle">
              And there’s no discharge in the war!
            </textPath>
          </text>
        </svg>
        <svg
          class="discharge-echo echo-1"
          viewBox="0 0 600 200"
          xmlns="http://www.w3.org/2000/svg"
        >
          <defs><path id="arcPath1" d="M 50 150 Q 300 20 550 150" /></defs>
          <text>
            <textPath href="#arcPath1" startOffset="50%" text-anchor="middle">
              And there’s no discharge in the war!
            </textPath>
          </text>
        </svg>

        <svg
          class="discharge-echo echo-2"
          viewBox="0 0 600 200"
          xmlns="http://www.w3.org/2000/svg"
        >
          <defs><path id="arcPath2" d="M 50 150 Q 300 50 550 150" /></defs>
          <text>
            <textPath href="#arcPath2" startOffset="50%" text-anchor="middle">
              And there’s no discharge in the war!
            </textPath>
          </text>
        </svg>

        <svg
          class="discharge-echo echo-3"
          viewBox="0 0 600 200"
          xmlns="http://www.w3.org/2000/svg"
        >
          <defs><path id="arcPath3" d="M 50 150 Q 300 80 550 150" /></defs>
          <text>
            <textPath href="#arcPath3" startOffset="50%" text-anchor="middle">
              And there’s no discharge in the war!
            </textPath>
          </text>
        </svg>
      </div>
      <div class="stuck-grid">
        <div class="grid-item">Try-</div>
        <div class="grid-item">try-</div>
        <div class="grid-item">try-</div>
        <div class="grid-item">try-</div>
        <div class="grid-item">to</div>
        <div class="grid-item">think</div>
        <div class="grid-item">o'</div>
        <div class="grid-item">something</div>
        <div class="grid-item">different-</div>
        <div class="grid-item special"><b>Boots-</b></div>
      </div>
      <div class="interactive-eye-cover" id="interactiveEyeCover">
        <img
          src="assets/eyeswide.svg"
          alt="Closed Eye"
          id="interactiveClosedEye"
          class="eye-img"
        />
        <img
          src="assets/eyeswideopen.svg"
          alt="Open Eye"
          id="interactiveOpenEye"
          class="eye-img hidden"
        />
      </div>

      <div class="black-overlay" id="blackOverlay"></div>
      <div class="boots-grid hidden" id="bootsGrid">
        <img src="assets/bootprint2.svg" class="boot top-left" alt="boots" />
        <img src="assets/bootprint2.svg" class="boot top-right" alt="boots" />
        <img src="assets/bootprint2.svg" class="boot bottom-left" alt="boots" />
        <img
          src="assets/bootprint2.svg"
          class="boot bottom-right"
          alt="boots"
        />

        <div class="drip-text">
          <span>movin'</span><br />
          <span>up</span><br />
          <span>an'</span><br />
          <span>down</span><br />
          <span>again!</span>
        </div>
      </div>
      <script>
        window.addEventListener("DOMContentLoaded", () => {
          const cover = document.getElementById("interactiveEyeCover");
          const closed = document.getElementById("interactiveClosedEye");
          const open = document.getElementById("interactiveOpenEye");
          const bootsGrid = document.getElementById("bootsGrid");
          const blackOverlay = document.getElementById("blackOverlay");

          closed.addEventListener("click", () => {
            closed.classList.add("hidden");
            open.classList.remove("hidden");
            blackOverlay.classList.add("show");

            setTimeout(() => {
              blackOverlay.classList.add("fade-out");
            }, 2800); // After overlay + boots in motion
            setTimeout(() => {
              cover.style.opacity = "0";
              bootsGrid.classList.remove("hidden");
              bootsGrid.classList.add("show");
            }, 1200);

            setTimeout(() => {
              cover.style.display = "none";
            }, 2200);
          });
        });
      </script>
      <div class="scene">
        <div class="moving-shadow"></div>
        <div class="texture-overlay"></div>

        <div class="content">
          <div id="bullets-container"></div>
          <div class="bullet-launcher">
            <img id="awm" src="assets/awm.svg" alt="Sniper Rifle" />
          </div>

          <div class="bullet-trail">
            <img src="assets/bullet.svg" class="bullet" />
            <img src="assets/bullet.svg" class="bullet" />
            <img src="assets/bullet.svg" class="bullet" />
            <img src="assets/bullet.svg" class="bullet" />
          </div>
        </div>
      </div>
      <div class="bandolier-line" id="bandolierLine">
        the bullets in the bandolier
      </div>

      <script>
        awm.addEventListener("click", () => {
          awm.classList.add("moved", "step1");

          setTimeout(() => {
            awm.classList.remove("step1");
            awm.classList.add("step2");
          }, 800);
        });
      </script>
      <div class="parallax-reveal" id="reveal-section"></div>

      <script type="module">
        import * as THREE from "https://cdn.skypack.dev/three@0.152.2";

        let scene, camera, renderer, uniforms;
        const mouse = new THREE.Vector2(0.5, 0.5);
        const container = document.getElementById("reveal-section");

        init();

        function init() {
          scene = new THREE.Scene();
          camera = new THREE.OrthographicCamera(-1, 1, 1, -1, 0, 1);

          renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
          renderer.setSize(window.innerWidth, window.innerHeight);
          container.appendChild(renderer.domElement);

          const loader = new THREE.TextureLoader();
          const baseTex = loader.load("assets/try.svg");
          const revealTex = loader.load("assets/trytothinkofsth.svg");

          uniforms = {
            u_base: { value: baseTex },
            u_reveal: { value: revealTex },
            u_mouse: { value: new THREE.Vector2(0.5, 0.5) },
            u_resolution: {
              value: new THREE.Vector2(window.innerWidth, window.innerHeight),
            },
            u_time: { value: 0.0 },
          };

          const material = new THREE.ShaderMaterial({
            uniforms,
            vertexShader: `
          void main() {
            gl_Position = vec4(position, 1.0);
          }
        `,
            fragmentShader: `
          precision mediump float;
          uniform sampler2D u_base;
          uniform sampler2D u_reveal;
          uniform vec2 u_mouse;
          uniform vec2 u_resolution;
          uniform float u_time;

          void main() {
            vec2 uv = gl_FragCoord.xy / u_resolution;
            float d = distance(uv, u_mouse);
            float ripple = sin(15.0 * d - u_time * 3.0);
            float mask = smoothstep(0.3, 0.0, d + ripple * 0.03);

            vec4 base = texture2D(u_base, uv);
            vec4 reveal = texture2D(u_reveal, uv);
            gl_FragColor = mix(base, reveal, mask);
          }
        `,
          });

          const plane = new THREE.PlaneGeometry(2, 2);
          const mesh = new THREE.Mesh(plane, material);
          scene.add(mesh);

          window.addEventListener("mousemove", (e) => {
            mouse.x = e.clientX / window.innerWidth;
            mouse.y = 1.0 - e.clientY / window.innerHeight;
            uniforms.u_mouse.value.set(mouse.x, mouse.y);
          });

          window.addEventListener("resize", () => {
            renderer.setSize(window.innerWidth, window.innerHeight);
            uniforms.u_resolution.value.set(
              window.innerWidth,
              window.innerHeight
            );
          });

          animate();
        }

        function animate(t) {
          uniforms.u_time.value = t * 0.001;
          requestAnimationFrame(animate);
          renderer.render(scene, camera);
        }
      </script>

      <div class="foreground-strings">
        <img
          src="assets/soldier%20and%20gun.svg"
          alt="Soldier and Gun"
          class="glitch-static soldier-gun"
        />
      </div>
      <div class="fractures">
        <div class="fracture-discharge">
          <p><span class="shard shard-1 blood-drip-text">Oh-</span></p>
          <p><span class="shard shard-1 blood-drip-text">my-</span></p>
          <p><span class="shard shard-2 blood-drip-text">God-</span></p>
          <p><span class="shard shard-2 blood-drip-text">keep-</span></p>
          <p><span class="shard shard-2 blood-drip-text">me</span></p>
          <p><span class="shard shard-3 blood-drip-text">from</span></p>
          <p><span class="shard shard-3 blood-drip-text">goin'</span></p>
          <p><span class="shard shard-4 blood-drip-text">LUNATIC!</span></p>
        </div>
        <div class="side-text left-flicker">
          <div>boots... BOOTS..boots..BOOTS....</div>
          <div>boots... BOOTS...</div>
          <div>BOOTS... BOOTS...BOOTS...BOOTS</div>
          <div>boots... boots...</div>
        </div>
        <div class="side-text right-flicker">
          <div>and there’s no discharge in the war</div>
          <div>no dischargein the war</div>
          <div>and there’s no discharge...</div>
          <div>and there’s no discharge IN THE WAR</div>
        </div>
      </div>
      <div class="hands">
        <img src="assets/leftie.svg" alt="Left Hand" class="left-hand" />
        <img src="assets/rightie.svg" alt="Right Hand" class="right-hand" />
        <img src="assets/strings.svg" alt="Strings" class="strings" />
      </div>
      <div class="boot-drop-scene" id="bootDropScene">
        <img src="assets/humanoid.svg" class="humanoid" id="humanoid" />
        <div class="bootdrop-line" id="bootdropLine">
          they will get on top of you.
        </div>
        <img src="assets/bootdrop.svg" class="bootdrop hidden" id="bootdrop" />
      </div>

      <div class="final-boots-scene" id="finalBootsScene">
        <div class="boots-center" id="centralBoot">Boots</div>
      </div>

      <script>
        const awm = document.getElementById("awm");
        const bullets = document.querySelectorAll(".bullet");
        const bulletContainer = document.getElementById("bullets-container");
        const bandolierLine = document.getElementById("bandolierLine");

        const landingSlots = [
          { left: "45%" },
          { left: "58%" },
          { left: "69%" },
          { left: "83%" },
        ];

        let bulletCount = 0;
        let hasFired = false;

        // 📦 Gun click: fire bullets, animate them, show bandolier text
        awm.addEventListener("click", () => {
          if (bulletCount >= 4 || hasFired) return;
          hasFired = true;

          // Animate gun steps
          awm.classList.add("moved", "step1");
          setTimeout(() => {
            awm.classList.add("step2");

            // Show bandolier line
            setTimeout(() => {
              bandolierLine.classList.remove("hidden");
              bandolierLine.classList.add("show");
            }, 1200);
          }, 800);

          // Create and animate 4 bullets
          for (let i = 0; i < 4; i++) {
            const bullet = document.createElement("img");
            bullet.src = "assets/bullet.svg";
            bullet.classList.add("bullet");
            bulletContainer.appendChild(bullet);

            bullet.style.position = "absolute";
            bullet.style.top = "60%";
            bullet.style.left = "20%";

            setTimeout(() => {
              bullet.classList.add("visible");
              bullet.style.transition = "transform 2s ease-out";
              bullet.style.transform = "translateX(800px) scale(2)";

              // Final landing placement
              setTimeout(() => {
                bullet.style.transition = "all 0.8s ease";
                bullet.style.transform = "scale(1.3)";
                bullet.style.top = "75%"; // adjust as needed
                bullet.style.left = landingSlots[i].left;
              }, 1000);
            }, i * 300);
          }
        });

        // 🎯 Slot deploy animation (scroll triggered)
        function deployBulletsToBandolier() {
          document.querySelector(".slot1")?.classList.add("active");
          setTimeout(
            () => document.querySelector(".slot2")?.classList.add("active"),
            300
          );
          setTimeout(
            () => document.querySelector(".slot3")?.classList.add("active"),
            600
          );
          setTimeout(
            () => document.querySelector(".slot4")?.classList.add("active"),
            900
          );
        }

        window.addEventListener("scroll", () => {
          const section = document.querySelector(".bandolier-section");
          if (!section) return;
          const triggerTop = section.getBoundingClientRect().top;
          if (triggerTop < window.innerHeight * 0.7) {
            deployBulletsToBandolier();
          }
        });
      </script>

      <script>
        const bootsScene = document.getElementById("finalBootsScene");
        const bootImageSrc = "assets/bootprint2.svg";
        let bootIdCounter = 0;

        bootsScene.addEventListener("mousemove", (e) => {
          if (bootsScene._lastBoot && Date.now() - bootsScene._lastBoot < 30)
            return;
          bootsScene._lastBoot = Date.now();

          const boot = document.createElement("img");
          boot.src = bootImageSrc;
          boot.classList.add("floating-boot");

          const angle = Math.floor(Math.random() * 360) + "deg";
          const scale = 0.7 + Math.random() * 0.8;
          const opacity = 0.25 + Math.random() * 0.35;

          const offsetX = (Math.random() - 0.5) * 60;
          const offsetY = (Math.random() - 0.5) * 60;
          const x = e.clientX + offsetX;
          const y = e.clientY + offsetY;

          boot.style.position = "absolute";
          boot.style.left = `${x}px`;
          boot.style.top = `${y}px`;
          boot.style.transform = `rotate(${angle}) scale(${scale})`;
          boot.style.opacity = opacity;
          boot.style.pointerEvents = "none";
          boot.style.filter = "blur(1.5px) drop-shadow(0 0 8px #0008)";
          boot.style.transition = "opacity 2.2s cubic-bezier(.4,0,.2,1)";

          boot.style.zIndex = 5;
          boot.id = `boot-${bootIdCounter++}`;

          bootsScene.appendChild(boot);

          setTimeout(() => {
            boot.style.opacity = 0;
          }, 1200 + Math.random() * 800);

          setTimeout(() => {
            boot.remove();
          }, 3000);
        });
      </script>

      <script>
        const triggerLine = document.getElementById("bootdropLine");
        const bootdrop = document.getElementById("bootdrop");

        triggerLine.addEventListener("click", () => {
          bootdrop.classList.remove("hidden");
          bootdrop.classList.add("show");
        });
      </script>
      <div id="ghostBoot"></div>
      <script>
        const ghostBoot = document.getElementById("ghostBoot");

        document.addEventListener("mousemove", (e) => {
          ghostBoot.style.transform = `translate(${e.clientX}px, ${e.clientY}px)`;
        });
        const angle = Math.random() * 360;
        ghostBoot.style.transform = `translate(${e.clientX}px, ${e.clientY}px) rotate(${angle}deg)`;
      </script>
      <script>
        window.addEventListener("DOMContentLoaded", () => {
          const bootAudio = document.getElementById("bootAudio");
          const soundToggle = document.getElementById("soundToggle");
          const bootTrigger = document.getElementById("bootTrigger");
          const launchCheckbox = document.getElementById("launch");

          let soundEnabled = true;

          soundToggle.addEventListener("click", () => {
            soundEnabled = !soundEnabled;
            soundToggle.textContent = soundEnabled ? "Sound: ON" : "Sound: OFF";

            if (!soundEnabled) {
              bootAudio.pause();
              bootAudio.currentTime = 0;
            }
          });

          bootTrigger.addEventListener("click", (e) => {
            e.preventDefault();
            launchCheckbox.checked = true;

            if (!soundEnabled) return;

            try {
              bootAudio.pause();
              bootAudio.currentTime = 0;

              const playPromise = bootAudio.play();
              if (playPromise !== undefined) {
                playPromise
                  .then(() => {})
                  .catch((err) => {
                    console.warn("Sound play error:", err);
                  });
              }
            } catch (err) {
              console.error("Playback error:", err);
            }
          });
        });
      </script>
    </section>
  </body>
</html>
